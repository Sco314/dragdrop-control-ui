<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Process Control System Drag-and-Click</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; display: flex; height: 100vh; }
    #sidebar {
      width: 240px;
      background: #f5f5f5;
      padding: 10px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    #word-bank { background: #fff; border: 1px solid #ccc; padding: 10px; flex-grow: 1; overflow-y: auto; }
    .label { display: block; padding: 5px 10px; background: white; border: 2px solid #000; margin-bottom: 8px; cursor: pointer; user-select: none; transition: border 0.3s ease; }
    .label.used { opacity: 0.6; cursor: default; }
    #main-content { flex-grow: 1; position: relative; }
    #background {
      position: absolute;
      width: 100%;
      height: 100%;
      background: url("Process_Control_System_label_valve_liquid_level_sensor_controller.png") no-repeat center/contain;
    }
    .hotspot {
      border: 2px dashed #ccc;
      border-radius: 50%;
      position: absolute;
      width: 100px;
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-weight: bold;
      background-color: rgba(255,255,255,0.5);
      cursor: pointer;
    }
    .hotspot-controls {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      border: 1px solid #ccc;
      padding: 4px;
      display: flex;
      flex-direction: column;
    }
    #toolbar button { margin-bottom: 5px; width: 100%; }
    #score { font-weight: bold; margin-top: auto; }
  </style>
</head>
<body>
  <div id="sidebar">
    <div id="toolbar">
      <button id="modeBtn">Enter Teacher Mode</button>
      <button id="clearBtn" style="display:none;">Clear All Hotspots</button>
      <button id="checkBtn">Check Answers</button>
    </div>
    <div id="word-bank"></div>
    <div id="score"></div>
  </div>
  <div id="main-content">
    <div id="background"></div>
  </div>
  <script>
    const labels = ["Valve", "Liquid Level Sensor", "Controller"];
    const background = document.getElementById("background");
    const wordBank = document.getElementById("word-bank");
    const modeBtn = document.getElementById("modeBtn");
    const checkBtn = document.getElementById("checkBtn");
    const clearBtn = document.getElementById("clearBtn");
    const scoreDisplay = document.getElementById("score");

    let isTeacher = false;
    let hotspots = [];
    let selectedLabel = null;
    const teacherPassword = "teach123";

    function createWordBank() {
      wordBank.innerHTML = "";
      labels.forEach(label => {
        const div = document.createElement("div");
        div.className = "label";
        div.textContent = label;
        div.addEventListener("click", () => {
          if (div.classList.contains("used")) return;
          selectedLabel = div;
          document.querySelectorAll(".label").forEach(l => l.style.border = "2px solid black");
          div.style.border = "2px solid blue";
        });
        wordBank.appendChild(div);
      });
    }

    function addHotspot(x, y, label) {
      const hs = document.createElement("div");
      hs.className = "hotspot";
      hs.style.left = `${x - 50}px`;
      hs.style.top = `${y - 50}px`;
      hs.dataset.correct = label;

      hs.onclick = e => {
        e.stopPropagation();
        if (isTeacher) {
          const controls = document.createElement("div");
          controls.className = "hotspot-controls";

          const up = document.createElement("button");
          up.textContent = "+";
          up.onclick = () => resizeHotspot(hs, 10);
          const down = document.createElement("button");
          down.textContent = "âˆ’";
          down.onclick = () => resizeHotspot(hs, -10);
          const del = document.createElement("button");
          del.textContent = "Delete";
          del.onclick = () => {
            hs.remove();
            hotspots = hotspots.filter(h => h !== hs);
          };

          controls.appendChild(up);
          controls.appendChild(down);
          controls.appendChild(del);
          hs.appendChild(controls);
          setTimeout(() => controls.remove(), 3000);
        } else if (selectedLabel) {
          if (selectedLabel.textContent === hs.dataset.correct) {
            hs.textContent = selectedLabel.textContent;
            hs.style.border = "2px solid green";
            selectedLabel.classList.add("used");
            selectedLabel.remove();
            selectedLabel = null;
          } else {
            selectedLabel.style.border = "2px solid yellow";
            setTimeout(() => selectedLabel.style.border = "2px solid black", 5000);
          }
        }
      };

      background.appendChild(hs);
      hotspots.push(hs);
    }

    function resizeHotspot(hs, delta) {
      const size = parseInt(hs.style.width || "100px");
      const newSize = Math.max(30, size + delta);
      hs.style.width = hs.style.height = `${newSize}px`;
    }

    background.addEventListener("click", e => {
      if (!isTeacher || !selectedLabel) return;
      const rect = background.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      addHotspot(x, y, selectedLabel.textContent);
    });

    modeBtn.onclick = () => {
      if (!isTeacher) {
        const input = prompt("Enter teacher password to enter Teacher Mode:");
        if (input !== teacherPassword) {
          alert("Incorrect password.");
          return;
        }
        isTeacher = true;
        modeBtn.textContent = "Switch to Student Mode";
        checkBtn.style.display = "none";
        clearBtn.style.display = "inline-block";
      } else {
        isTeacher = false;
        modeBtn.textContent = "Enter Teacher Mode";
        checkBtn.style.display = "inline-block";
        clearBtn.style.display = "none";
        createWordBank();
      }
    };

    clearBtn.onclick = () => {
      hotspots.forEach(h => h.remove());
      hotspots = [];
    };

    checkBtn.onclick = () => {
      let correct = 0;
      hotspots.forEach(h => {
        if (h.textContent === h.dataset.correct) correct++;
      });
      scoreDisplay.textContent = `Score: ${correct} / ${hotspots.length}`;
    };

    createWordBank();
    checkBtn.style.display = "inline-block";
  </script>
</body>
</html>
